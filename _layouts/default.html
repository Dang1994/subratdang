<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>{{ page.title | default: site.title }}</title>
  <meta name="description" content="{{ page.description | default: site.description }}" />

  {%- comment -%} SEO tag (rendered only if jekyll-seo-tag is enabled in _config.yml) {%- endcomment -%}
  {% if site.plugins contains 'jekyll-seo-tag' or site.gems contains 'jekyll-seo-tag' %}
    {% seo %}
  {% endif %}

  <!-- Canonical -->
  <link rel="canonical" href="{{ page.url | absolute_url }}" />

  <!-- Favicons -->
  <link rel="icon" href="{{ '/assets/img/favicon.ico' | relative_url }}" />
  <link rel="apple-touch-icon" sizes="180x180" href="{{ '/assets/img/apple-touch-icon.png' | relative_url }}" />
  <meta name="theme-color" content="#0ea5a4" />

  <!-- Open Graph -->
  <meta property="og:site_name" content="{{ site.title }}" />
  <meta property="og:title" content="{{ page.title | default: site.title }}" />
  <meta property="og:description" content="{{ page.description | default: site.description }}" />
  <meta property="og:type" content="{{ page.og_type | default: 'website' }}" />
  <meta property="og:url" content="{{ page.url | absolute_url }}" />
  <meta property="og:image" content="{{ page.og_image | default: site.url | append: (site.baseurl | append: '/assets/img/headshot.jpg') }}" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:creator" content="{{ site.social.twitter | default: site.twitter | default: '' }}" />
  <meta name="twitter:title" content="{{ page.title | default: site.title }}" />
  <meta name="twitter:description" content="{{ page.description | default: site.description }}" />
  <meta name="twitter:image" content="{{ page.og_image | default: site.url | append: (site.baseurl | append: '/assets/img/headshot.jpg') }}" />

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="{{ '/feed.xml' | relative_url }}" />

  <!-- Preconnect & fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Main stylesheet -->
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}" />

  <!-- Structured data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "{{ site.name | default: site.title }}",
    "jobTitle": "{{ site.jobtitle | default: 'PhD Candidate' }}",
    "worksFor": {
      "@type": "Organization",
      "name": "{{ site.institution | default: 'IIT Roorkee' }}"
    },
    "url": "{{ site.url | default: '' }}",
    "sameAs": [
      {% assign soc = site.social | default: {} %}
      {% if soc.github %}"{{ soc.github }}"{% endif %}
      {% if soc.scholar %}{% if soc.github %}, {% endif %}"{{ soc.scholar }}"{% endif %}
      {% if soc.linkedin %}{% if soc.github or soc.scholar %}, {% endif %}"{{ soc.linkedin }}"{% endif %}
    ]
  }
  </script>

  <!-- Allow per-page head injections -->
  {{ content_for_head }}
</head>
<body class="site-body">

  <!-- Skip link for accessibility -->
  <a class="skip-link" href="#content">Skip to content</a>

  {% include header.html %}

  <main id="content" role="main" aria-labelledby="main-title">
    <div class="container">

      {%- comment -%}
      Home is treated specially so index can contain a custom hero.
      Use robust home detection accounting for baseurl.
      {%- endcomment -%}

      {% assign current_url = page.url | prepend: site.baseurl %}
      {% assign home_paths = '/' | append: site.baseurl | split: ',' %}
      {% if page.url == '/' or page.url == '/index.html' or page.url == site.baseurl or page.url == site.baseurl | append: '/' %}
        {{ content }}
      {% else %}
        <section aria-labelledby="main-title">
          <h1 id="main-title" style="margin-top:0;">{{ page.title }}</h1>

          {% if page.description %}
            <p class="lead">{{ page.description }}</p>
          {% endif %}

          {{ content }}
        </section>
      {% endif %}

    </div>
  </main>

  {% include footer.html %}

  <!-- Mobile nav toggle helper (deferred) -->
  <script defer>
  (function() {
    const btn = document.getElementById('nav-toggle');
    const links = document.querySelector('.navlinks');
    if (!btn || !links) return;
    btn.addEventListener('click', function() {
      const expanded = this.getAttribute('aria-expanded') === 'true';
      this.setAttribute('aria-expanded', String(!expanded));
      links.classList.toggle('open');
    });

    // Add rel="noopener" to external links for security
    document.querySelectorAll('a[target="_blank"]').forEach(a => {
      if (!a.rel.includes('noopener')) a.rel = (a.rel + ' noopener noreferrer').trim();
    });
  })();
  </script>

  <noscript>
    <style>.navlinks{display:block!important}</style>
    <div style="background:#fff3; padding:8px; text-align:center; font-size:13px;">
      JavaScript is disabled â€” some interactive features may not work.
    </div>
  </noscript>

</body>
</html>
